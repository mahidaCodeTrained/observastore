{% extends 'base.html' %}

{% block content %}
    <div class="container-fluid px-3">
        <!-- Show Messages -->
        {% if messages %}
            <div class="alert alert-warning" role="alert">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}

        <h1 class="text-center my-4" id="product-h1">Our Products</h1>

        <!-- Show category message if a category filter is applied -->
        {% if current_categories %}
            <div class="alert alert-info text-center">
                Showing products for category: 
                {% for category in current_categories %}
                    <strong>{{ category.name }}</strong>{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </div>
        {% endif %}

        <div class="row justify-content-center">
            {% for product in products %}
                <div class="col-lg-3 col-md-4 col-sm-6 mb-3 d-flex justify-content-center">
                    <a href="{% url 'product_details' product.id %}" class="text-decoration-none text-dark" style="width: 220px;">
                        <div class="product-item border rounded shadow-sm p-2 text-center d-flex flex-column justify-content-between"
                             style="background-color: rgba(255, 255, 255, 0.95); height: 260px; transition: transform 0.2s ease-in-out;">
                             
                            <!-- Product Image -->
                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" 
                                     class="img-fluid mx-auto d-block rounded" 
                                     style="width: 100%; height: 160px; object-fit: cover; border-radius: 6px;">
                            {% else %}
                                <img src="/media/pexels-thirdman-8495471.jpg" alt="No image available" 
                                     class="img-fluid mx-auto d-block rounded" 
                                     style="width: 100%; height: 160px; object-fit: cover; border-radius: 6px;">
                            {% endif %}

                            <!-- Product Title -->
                            <h6 class="mt-2 font-weight-bold text-truncate">{{ product.name }}</h6>

                            <!-- Product Price -->
                            <p class="text-primary font-weight-bold mb-1">${{ product.price }}</p>
                        </div>
                    </a>
                </div>
            {% empty %}
                <p class="text-center w-100">No products available.</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}













